<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

<script>

    let menu = ''
    let cart = ''
    let totalPrice
    let inputUserMenu
    let inputUserMenuIndex
    let inputUserQuantity
    let isRepeat

    let arrItem = [
    { Buah: 'Jeruk',
      Harga: 5000,
      Stock: 20,
      Input: 0
    } ,
    { Buah: 'Apel',
      Harga: 8000,
      Stock: 20,
      Input: 0
    } ,
    { Buah: 'Mangga',
      Harga: 7000,
      Stock: 20,
      Input: 0
    }
    ]

    do {

        menu = ''
        for (i = 0; i < arrItem.length; i++){
            menu += (i +1 ) +` ${arrItem[i].Buah} Price ${arrItem[i].Harga} IDR, Stock (${arrItem[i].Stock} Pcs)\n`
        }

        menu += `${arrItem.length + 1} Cart \n${arrItem.length + 2 } Checkout `

        inputUserMenu = prompt(menu)
        inputUserMenuIndex = inputUserMenu - 1

        if (inputUserMenu == arrItem.length + 2 ) {

            totalPrice = 0

            for (i = 0 ; i < arrItem.length; i++){
                 
                totalPrice += arrItem[i].Harga * arrItem[i].Input
            }

            do {

                userPayment = prompt(`Your total purchase are ${totalPrice}`)
  
                if (userPayment > totalPrice) {
                alert(`YOur cahanges are IDR ${userPayment - totalPrice}`)
                isRepeat = false

                } else if (userPayment < totalPrice) {
                alert(`Your money is not enough  ${totalPrice - userPayment}`)
                isRepeat = true

                } else if (userPayment == totalPrice) {
                alert('Thank You')
                isRepeat = false
                }
                
            } while (isRepeat)


            for (let i = 0; i <arrItem.Input.length; i++) {
            arrItem[i].Stock -= arrItem[i].Input
            arritem[i].Input = 0
            }
            
            isRepeat = confirm('Do you want to shop again ?')
            
            
        } else if (inputUserMenu == arrItem.length + 1 ){
            
            cart = ''
            for ( i = 0; i < arrItem.length; i++){
                cart += `${arrItem[i].Buah} (${arrItem[i].Input} Pcs)`
            }

            alert(cart)

        } else {

            do {

                inputUserQuantity = parseInt(prompt(`How much  ${arrItem[inputUserMenuIndex].Buah} ?` ))

                if (arrItem[inputUserMenuIndex].Stock >= inputUserQuantity + arrItem[inputUserMenuIndex].Input ){
                    arrItem[inputUserMenuIndex].Input += inputUserQuantity
                    isRepeat = false

                } else {
                    alert(`stock ${arrItem[inputUserMenuIndex].Buah} is not enough`)
                    isRepeat = true
                }

            } while (isRepeat)

            isRepeat = true
        } 

    } while (isRepeat)
        

</script>
    
</body>
</html>